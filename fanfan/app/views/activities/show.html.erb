<% title "Activities" %>

<p>
  <strong>Subject:</strong>
  <%= @activity.subject %>
</p>
<p>
  <strong>Status:</strong>
  <%= @activity.status %>
</p>
<p>
  <strong>Cost:</strong>
  <%= @activity.cost %>
</p>
<p>
  <strong>Average:</strong>
  <%= @activity.cost/@activity.users.size unless @activity.users.empty?%>
</p>
<p>
  <strong>Detail:</strong>
  <%= @activity.detail %>
</p>
<p>
  <strong>Participants:</strong>
  <%= @activity.users.map{|u| u.name}.join(",") %>

<p>
<div>
  <strong>Payments Details:</strong>
  <table>
    <tr>
      <th>member</th>
      <th>payed</th>
      <th>debts</th>
    </tr>
    <% users_count = @activity.payers.size %>
    <% average = @activity.cost / users_count %>
    <% for payment in @activity.payments %>
      <tr>
         <td><%=payment.user.name%></td>
         <td><%=payment.amount%></td>
         <td><%=average-payment.amount%></td>
      </tr>
    <% end%>

  </table>

</div>

  <%= link_to "Edit", edit_activity_path(@activity) %> |
  <%= link_to "Destroy", @activity, :confirm => 'Are you sure?', :method => :delete %> |
  <%= link_to "View All", activities_path %>

